#pragma once

#include "module/ModuleCore.hpp"

namespace Amb
{
    namespace Module
    {
        namespace Mlvl
        {
            class MlvlModule final : public ModuleCore
            {
            public:
                MlvlModule(const Configs::Mlvl &config,
                           const Configs::AdvancedSettings &advancedSettings,
                           Simulate::Simulator &simulator,
                           const Client::TibiaClientWindowInfo &tibiaClientWindowInfo,
                           std::unique_ptr<Client::Reader::TibiaClientReader> tibiaClientReader = nullptr);

                void attachToNewProcess(DWORD pid) override;
                void setEnableDebugLogs(bool enabled) override;

            private:
                const Configs::Mlvl &config;
                const Configs::AdvancedSettings &advancedSettings;
                std::unique_ptr<Client::Reader::TibiaClientReader> tibiaClientReader;

                void runDetails() override;
                void applyConfigs() override;
            };
        }
    }
}


